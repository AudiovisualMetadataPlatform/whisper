# Whisper recipe 
Bootstrap: docker
From: fedora:38

%post
yum update -y
yum install -y python3 python3-pip ffmpeg-free

pip3 install setuptools-rust
pip3 install openai-Whisper


# install the models somewhere
mkdir -p /opt/whisper
for n in tiny base small medium large; do
    whisper --model $n --model_dir=/opt/whisper /dev/null || true
done

# Clean up everything.
rm -rf /root/.cache/pip
yum clean all


%runscript
whisper "$@"
